<!DOCTYPE html>
<html lang="en">

<head>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">
</head>

<body>
    <!--JUMBOTRON HEADER-->
    <div class="jumbotron jumbotron-fluid">
        <div class="Heading">
          <h1 class="display-4">Weather Dashboard</h1>
        </div>
      </div>
    
    <!--Container for the remainder of the weather webpage-->
    <div class="container">
        <div class="row">
            <div class="col-md-3">
                <!--USER SEARCH INPUT-->
                <div class="input-group mb-3">
                    <input type="text" class="form-control" id="searchTerm" placeholder="Search City" aria-label="Recipient's username" aria-describedby="button-addon">
                    <div class="input-group-append">
                    <button class="btn btn-outline-secondary" type="button" id="searchButton">Search</button>
                    </div>
                </div>
                <!--Sub-Navigation bar which saves the cities the user has searched-->
                <ul class="list-group">
                    <li class="list-group-item">Search City 1</li>
                    <li class="list-group-item">Search City 2</li>
                    <li class="list-group-item">Search City 3</li>
                    <li class="list-group-item">Search City 4</li>
                    <li class="list-group-item">Search City 5</li>
                </ul>
            </div>
            <div class="col-md-9">
                <!--Card Area to show City Information-->
                <div class="card">
                    <div class="card-body">
                      <h2 id = "weatherToday"></h2>
                      <p id = "temperature">Temperature:</p>
                      <p id = "humidity">Humidity:</p>
                      <p id = "windSpeed">Windspeed:</p>
                      <p id = "uvIndex">UV Index:</p>
                    </div>
                </div>
                <h1 class="forecast">5-Day Forecast</h1>
                <!--Card Decking layout to show weather for next 5 days-->
                <div class="card-deck">                    
                    <!--Day 1-->
                    <div class="card">
                      <img src="./assets/cloud.png" class="card-img-top" alt="sun">
                      <div class="card-body">
                        <h5 class="card-title">Today</h5>
                        <p class="card-text">Weather Information</p>
                      </div>
                      <div class="card-footer">
                        <small class="text-muted">Last updated 3 mins ago</small>
                      </div>
                    </div>
                    <!--Day 2-->
                    <div class="card">
                      <img src="./assets/cloud.png" class="card-img-top" alt="...">
                      <div class="card-body">
                        <h5 class="card-title">Tomorrow</h5>
                        <p class="card-text">Weather Information</p>
                      </div>
                      <div class="card-footer">
                        <small class="text-muted">Last updated 3 mins ago</small>
                      </div>
                    </div>
                    <!--Day 3-->
                    <div class="card">
                      <img src="./assets/cloud.png" class="card-img-top" alt="...">
                      <div class="card-body">
                        <h5 class="card-title">Day 3</h5>
                        <p class="card-text">Weather Information</p>
                      </div>
                      <div class="card-footer">
                        <small class="text-muted">Last updated 3 mins ago</small>
                      </div>
                    </div>
                    <!--Day 4-->
                    <div class="card">
                        <img src="./assets/cloud.png" class="card-img-top" alt="...">
                        <div class="card-body">
                          <h5 class="card-title">Day 4</h5>
                          <p class="card-text">Weather Information</p>
                        </div>
                        <div class="card-footer">
                          <small class="text-muted">Last updated 3 mins ago</small>
                        </div>
                    </div>
                    <!--Day 5-->
                    <div class="card">
                        <img src="./assets/cloud.png" class="card-img-top" alt="...">
                        <div class="card-body">
                          <h5 class="card-title">Day 5</h5>
                          <p class="card-text">Weather Information</p>
                        </div>
                        <div class="card-footer">
                          <small class="text-muted">Last updated 3 mins ago</small>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!------------------------------------------------------------------------------------------------------------------------------>
    <!----------------------------------------JAVASCRIPT CODE-------------------------------------------------------------------- -->
    <!------------------------------------------------------------------------------------------------------------------------------>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script type="text/javascript">
    
    var lat = 0;
    var long = 0;
    //Openweather API Key
    var APIkey = "166a433c57516f51dfab1f7edaed8413";
    
    function getweather(city)
    {
      //Set variable for search url
      //queryURL for weather today
      //var queryURL1 ="api.openweathermap.org/data/2.5/weather?q=" + city;
      //queryURL for weather forecast
      var queryURL2 = "http://api.openweathermap.org/data/2.5/forecast?q=" + city + "&appid=" + APIkey;
      $.ajax({
            url: queryURL2,
            method: "GET"
        }).then(function(response)
        {   //console.log(response)
            var data = response.list[0];
            var tempData = data.main.temp;
            
            var humidData = data.main.humidity;
            
            var windData = data.wind.speed;
            var lat = response.city.coord.lat;
            var long = response.city.coord.long;
            
            $("#temperature").text("Temperature (Farenheight) = " + tempData);
            $("#humidity").text("Humidity(%)= " + humidData);
            $("#windSpeed").text("Wind(km/h) =" + windData);
            return lat,long
        })
      console.log(lat, long)

    }

    function getUV(lat,long)
    {
      var queryUV = "http://api.openweathermap.org/data/2.5/uvi?appid=" + APIkey + "&lat="+ lat +"&lon="+ long;
      $.ajax({
            url: queryURL2,
            method: "GET"
        }).then(function(response)
        {
          var UVval = response.value;
          $("#UVindex").text("UV Index = " + UVval);
        })
    }




    //Event Listener for Search Button
    $("#searchButton").on("click",function()
    {   
        
        
        //Jquery variables
        var city = $("#searchTerm").val();
        $("#weatherToday").append(city);
        
        getweather(city);
        //getUV(lat,long);
        

           
    })
        
    
    
    </script>


</body>
</html>
